{% extends 'base.html' %}

<head>
    <title>
        {% block title %}Home{% endblock %}
    </title>
</head>
<body>
    {% block main %}
    <h1><b>Product Catalogue</b></h1>
    <br>

    <div>
        <form id="form" role="search" action="{{ url_for('search') }}" method="GET">
            <div class="input-group" width="100%">
                <input type="search" id="query" name="q" aria-label="Search through site content" class="form-control" placeholder="Search...">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">
                        <img src="{{ url_for('static', filename='img/search.svg') }}" alt="Search" width="20" height="20">
                    </button>
                </div>
            </div>
        </form>
    </div>
    <br>

    <!-- show the results of products in a table -->
    {% if rows == [] %}
    <p>No results found</p>
    {% else %}
    {% if request.args.get("q") not in [None, ""] %}
    <p>Showing results for "{{ request.args.get('q') }}"</p>
    {% endif %}
    <table>
        <tr>
            <th>Product</th>
            <th>Price</th>
            <th>In Stock</th>
        </tr>
        {% for product in rows %}
        <tr>
            <td>{{ product[1] }}</td>
            <td>{{ product[3] }}</td>
            <td>{{ "Yes" if product[2] > 0 else "No" }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    {% endblock %}
</body>
