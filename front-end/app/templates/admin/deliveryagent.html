{% extends 'base.html' %}

<title>
    {% block title %}Delivery Agent Stats{% endblock %}
</title>

<body>
    {% block main %}

    <div class="card" style="margin-right: 0px !important;">
        <h1 style="font-size: 72px;"><b>{{ context['count'] }}+</b></h1>
        <h2><b>Delivery Agents</b></h2>
        <p>are helping <b>EBMS</b> deliver Products to Customers.</p>
    </div>

    <br>
    <hr>
    <p style="color: gray; text-align: left;">Get the details of a specific delivery agent.</p>
    <div>
        <form id="form" role="search" method="GET">
            <div class="input-group" width="100%">
                <input type="search" id="query" name="daID" aria-label="Search through site content" class="form-control" placeholder="Delivery Agent ID...">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">
                        <img src="{{ url_for('static', filename='img/search.svg') }}" alt="Search" width="20" height="20">
                    </button>
                </div>
            </div>
        </form>
    </div>

    <br>
    <hr>

    <h1><b>Top-Rated Agents</b></h1>

    Here is a summary of the top-rated delivery agents joined to ebms
    <br>
    <br>

    <table class="table table-striped table-hover table-bordered" style="text-align: left;" id="searchTable">
        <thead class="thead-dark">
            <tr>
                <th>Delivery Agent ID</th>
                <th>Delivery Agent Name</th>
                <th>E-Mail Address</th>
                <th>Average Rating</th>
            </tr>
        </thead>

        {% for row in context['top_rated'] %}
        <tr>
            <td>{{ row['daID'] }}</td>
            <td>{{ row['name'] }}</td>
            <td>{{ row['email'] }}</td>
            <td>{{ row['avg_rating'] }}</td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <hr>

    <h1><b>Most Active Agents</b></h1>

    Here is a summary of the most active delivery agents who have delivered the most number of orders
    <br>
    <br>

    <table class="table table-striped table-hover table-bordered" style="text-align: left;" id="searchTable">
        <thead class="thead-dark">
            <tr>
                <th>Delivery Agent ID</th>
                <th>Delivery Agent Name</th>
                <th>E-Mail Address</th>
                <th>Number of Orders</th>
            </tr>
        </thead>

        {% for row in context['most_active'] %}
        <tr>
            <td>{{ row['daID'] }}</td>
            <td>{{ row['name'] }}</td>
            <td>{{ row['email'] }}</td>
            <td>{{ row['total_orders'] }}</td>
        </tr>
        {% endfor %}
    </table>

    {% endblock %}
</body>