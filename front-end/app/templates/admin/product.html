{% extends 'base.html' %}

<title>
    {% block title %}Product Stats{% endblock %}
</title>

<body>
    {% block main %}

    <div class="card" style="margin-right: 0px !important;">
        <h1 style="font-size: 72px;"><b>{{ context['count'] }}+</b></h1>
        <h2><b>Products</b></h2>
        <p>have been sold through through <b>EBMS</b>.</p>
    </div>

    <br>
    <hr>
    <p style="color: gray; text-align: left;">Get the details of a specific product.</p>
    <div>
        <form id="form" role="search" method="GET">
            <div class="input-group" width="100%">
                <input type="search" id="query" name="productID" aria-label="Search through site content" class="form-control" placeholder="Product ID...">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">
                        <img src="{{ url_for('static', filename='img/search.svg') }}" alt="Search" width="20" height="20">
                    </button>
                </div>
            </div>
        </form>
    </div>

    <br>
    <hr>

    <h1><b>Best Sellers</b></h1>

    Here is a summary of ebms' best-selling products
    <br>
    <br>

    <table class="table table-striped table-hover table-bordered" style="text-align: left;" id="searchTable">
        <thead class="thead-dark">
            <tr>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Unit Price</th>
                <th>Number of Units Sold</th>
            </tr>
        </thead>

        {% for row in context['best_sellers'] %}
        <tr>
            <td>{{ row['productID'] }}</td>
            <td>{{ row['name'] }}</td>
            <td>{{ row['price'] }}</td>
            <td>{{ row['quantity'] }}</td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <hr>

    <h1><b>Top-Rated Products</b></h1>

    Here is a summary of ebms' top-rated products
    <br>
    <br>

    <table class="table table-striped table-hover table-bordered" style="text-align: left;" id="searchTable">
        <thead class="thead-dark">
            <tr>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Unit Price</th>
                <th>Average Rating</th>
            </tr>
        </thead>

        {% for row in context['top_rated'] %}
        <tr>
            <td>{{ row['productID'] }}</td>
            <td>{{ row['name'] }}</td>
            <td>{{ row['price'] }}</td>
            <td>{{ row['avg_rating'] }}</td>
        </tr>
        {% endfor %}
    </table>

    {% endblock %}
</body>